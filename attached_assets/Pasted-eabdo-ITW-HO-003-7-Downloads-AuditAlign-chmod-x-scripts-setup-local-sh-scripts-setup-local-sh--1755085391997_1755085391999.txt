eabdo@ITW-HO-003-7:~/Downloads/AuditAlign$ chmod +x scripts/setup-local.sh
./scripts/setup-local.sh
🚀 Setting up GRC Management System for local development...
🗄️  Setting up database...
[sudo] password for eabdo: 
CREATE DATABASE
CREATE ROLE
GRANT
GRANT
GRANT
GRANT
GRANT
ALTER DEFAULT PRIVILEGES
ALTER DEFAULT PRIVILEGES
ALTER DEFAULT PRIVILEGES
📦 Installing dependencies...
npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is

added 499 packages, and audited 500 packages in 14s

67 packages are looking for funding
  run `npm fund` for details

11 vulnerabilities (3 low, 8 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
⚙️  Creating .env file...
✅ Created .env file with default configuration
🔄 Pushing database schema...

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/home/eabdo/Downloads/AuditAlign/drizzle.config.ts'
Using 'pg' driver for database querying
[✓] Pulling schema from database...
error: permission denied for schema public
    at /home/eabdo/Downloads/AuditAlign/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Object.query (/home/eabdo/Downloads/AuditAlign/node_modules/drizzle-kit/bin.cjs:66575:26)
    at async pgPush (/home/eabdo/Downloads/AuditAlign/node_modules/drizzle-kit/bin.cjs:70117:13)
    at async Object.handler (/home/eabdo/Downloads/AuditAlign/node_modules/drizzle-kit/bin.cjs:79124:9)
    at async run (/home/eabdo/Downloads/AuditAlign/node_modules/drizzle-kit/bin.cjs:78381:7) {
  length: 99,
  severity: 'ERROR',
  code: '42501',
  detail: undefined,
  hint: undefined,
  position: '14',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'aclchk.c',
  line: '2812',
  routine: 'aclcheck_error'
}
🌱 Seeding initial data...

> rest-express@1.0.0 db:seed
> tsx scripts/seed-data.ts

/home/eabdo/Downloads/AuditAlign/server/db.ts:9
  throw new Error(
        ^


Error: DATABASE_URL must be set. Did you forget to provision a database?
    at <anonymous> (/home/eabdo/Downloads/AuditAlign/server/db.ts:9:9)
    at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:473:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:122:5)

Node.js v20.18.1

🎉 Setup complete! To start the application:
   npm run dev

The application will be available at: http://localhost:5000

📝 Database credentials:
   Host: localhost
   Port: 5432
   Database: grc_management
   Username: grc_user
   Password: grc_password
eabdo@ITW-HO-003-7:~/Downloads/AuditAlign$ npm run dev

> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

/home/eabdo/Downloads/AuditAlign/server/db.ts:9
  throw new Error(
        ^


Error: DATABASE_URL must be set. Did you forget to provision a database?
    at <anonymous> (/home/eabdo/Downloads/AuditAlign/server/db.ts:9:9)
    at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:473:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:122:5)

Node.js v20.18.1
eabdo@ITW-HO-003-7:~/Downloads/AuditAlign$ vi .env
.env          .env.example  
eabdo@ITW-HO-003-7:~/Downloads/AuditAlign$ vi .env
.env          .env.example  
eabdo@ITW-HO-003-7:~/Downloads/AuditAlign$ vi .env
eabdo@ITW-HO-003-7:~/Downloads/AuditAlign$ DATABASE_URL="postgresql://grc_user:grc_password@localhost:5432/grc_management"
eabdo@ITW-HO-003-7:~/Downloads/AuditAlign$ psql -h localhost -p 5432 -U grc_user -d grc_management
Password for user grc_user: 
psql (16.9 (Ubuntu 16.9-0ubuntu0.24.04.1))
SSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, compression: off)
Type "help" for help.

grc_management=> ^C
grc_management=> 
\q
